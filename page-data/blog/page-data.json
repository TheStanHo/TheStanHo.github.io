{"componentChunkName":"component---node-modules-gatsby-theme-portfolio-minimal-src-templates-article-listing-index-tsx","path":"/blog/","result":{"pageContext":{"articles":[{"banner":{"alt":"FluentBit Post","caption":"Photo by <u><a href=\"https://unsplash.com/photos/oQD9uq4Rd4I\">MichaÅ‚ Jakubowski</a></u>","src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#4898b8","images":{"fallback":{"src":"/static/355967cea4704166703b831eff82c587/91671/michal-jakubowski-oQD9uq4Rd4I-unsplash.jpg","srcSet":"/static/355967cea4704166703b831eff82c587/7e3b4/michal-jakubowski-oQD9uq4Rd4I-unsplash.jpg 165w,\n/static/355967cea4704166703b831eff82c587/47f88/michal-jakubowski-oQD9uq4Rd4I-unsplash.jpg 330w,\n/static/355967cea4704166703b831eff82c587/91671/michal-jakubowski-oQD9uq4Rd4I-unsplash.jpg 660w,\n/static/355967cea4704166703b831eff82c587/5aaff/michal-jakubowski-oQD9uq4Rd4I-unsplash.jpg 1320w","sizes":"(min-width: 660px) 660px, 100vw"},"sources":[{"srcSet":"/static/355967cea4704166703b831eff82c587/322ad/michal-jakubowski-oQD9uq4Rd4I-unsplash.webp 165w,\n/static/355967cea4704166703b831eff82c587/de3b3/michal-jakubowski-oQD9uq4Rd4I-unsplash.webp 330w,\n/static/355967cea4704166703b831eff82c587/2b2b5/michal-jakubowski-oQD9uq4Rd4I-unsplash.webp 660w,\n/static/355967cea4704166703b831eff82c587/e36a7/michal-jakubowski-oQD9uq4Rd4I-unsplash.webp 1320w","type":"image/webp","sizes":"(min-width: 660px) 660px, 100vw"}]},"width":660,"height":400}}}},"body":"<h1>ðŸš§To be Written!ðŸš§</h1>\n<!-- ## Code block test\r\n\r\n```css\r\n.AClass .Subtitle {\r\n  margin: -0.5rem 0 0 0;\r\n  font-weight: 700;\r\n  font-size: 1.25rem;\r\n  line-height: 1.5rem;\r\n}\r\n\r\n.AnotherClass p {\r\n  font-size: 1.125rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.AThirdClass {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .AClass {\r\n    flex-direction: column;\r\n  }\r\n  .AnotherClass {\r\n    display: block;\r\n  }\r\n}\r\n```\r\n\r\nInline code: `print()`\r\n\r\nLorem ipsum dolor sit amed Vel ut spiritday all cultural Lili Elbe lorem in sexuality Herstory sit lorem Ac Genderless homoflexible trans Carrie Fisher Transgender love family cross-dresser ac a ut Ac xe she ut Tina Anselmi woman Marina Abramovich Lesbians and Gays Support the Miners Ipsum Chimamanda Ngozi sed sit Equal movement gender ut est lorem Laura Jane Grace Emma Watson sem eu.\r\n\r\n**Maria Montessori vel sem in eu Leelah Alcorn** In eu Leelah Alcorn in Margaret Sanger future Martha Nussbaum eu gender non-conformity Family cross-dresser ac a ut representation drag queen Ac third wave Hannah Gadsby culture feminismus ac suffragette cisgender in a eu Ac a ut representation drag queen Out Lorem ac no means no f word sed Emmeline Pankhurst.\r\n\r\n## Second Headline\r\n\r\nEst vel est appreciation Nadia Murad Basee Taha cross-dressing vel Ut mi sit ut eu id Samira Wiley sit vel sem Ut romance in gender studies ballroom Sit lorem ac no means no f word sed Emmeline Pankhurst Ac sorellanza In Lea Delaria in grrlpwr pansexual intersectional yas queen diritti id mi Sem Audre Lorde Sappho in sed et empowerment genderqueer intersex.\r\n\r\n![This is the alt tag.](../../images/kelly-sikkema-Hl3LUdyKRic-unsplash.jpg \"This is a markdown [caption](https://konstantin.digital).\")\r\n\r\nFeminizmas eu Dian Fossey ac third wave notion supporting androgyny dui ut People a Sylvia Plath mi sex-positivity demisexual a equality suffragettes pronouns Vel est appreciation Nadia Murad Basee Taha cross-dressing vel Sustainability ut sit dui Lesbians and Gays Support the Miners local eu Hanna Gaby Odiele est queer Misty Copeland She ut Tina Anselmi woman Marina Abramovich Lesbians and Gays Support the Miners local Equal ac et ut romance in Second wave sit friendship grl pwr castro.\r\n\r\n### Third Headline\r\n\r\nVel sem Sed Roxane Gay Caitlin Moran Ace id Amelia Earhart Gloria Steinem Samira Wiley sit Amelia Earhart Gloria Steinem eu In et ac in Alexandria Ocasio-Cortez Emmy Noether a Bi-visibility Dance Simone de Beauvoir eu sem.\r\n\r\n#### Fourth Headline\r\n\r\nAlexandria Ocasio-Cortez Emmy Noether a Bi-visibility dui et voices Stonewall Inn sem et Ac pride month lorem et eu dui sit eu ut Eu ut Et in lorem id sed Id Kate Bornstein smash the patriarchy et et eu motivational ut In Chimamanda Ngozi sed sit strength.\r\n\r\n![This is the alt tag.](../../images/charles-deluvio-DgoyKNgPiFQ-unsplash.jpg)\r\n\r\nVel herstory Bossy sit ac xe she ut Tina Anselmi woman Marina Abramovich Spiritday all cultural Lili Elbe lorem in sexuality Transformation lgbt freedom et ac sem Sem we are everywhere Notion supporting androgyny dui ut dance Simone de Beauvoir eu sem sit Inge SchonÃ¶ethal Feltrinelli female gaze ac Franca viola. -->","categories":["Monitoring","Kubernetes","AKS"],"date":"March 12, 2023","description":"The Wonders of FluentBit","id":"bfc8e71b-7270-57f8-9445-6c15212d51fc","keywords":["Monitoring","FluentBit","Kubernetes","AKS","Blog"],"slug":"/FluentBit/","title":"The Wonders of FluentBit","readingTime":{"text":"3 min read"}},{"banner":{"alt":"IaC","caption":"Photo by <u><a href=\"https://unsplash.com/photos/zwd435-ewb4\">Andrea De Santis</a></u>","src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#283838","images":{"fallback":{"src":"/static/9e2389dadc3934d1e0ba6f52d023d46e/91671/andrea-de-santis-zwd435-ewb4-unsplash.jpg","srcSet":"/static/9e2389dadc3934d1e0ba6f52d023d46e/7e3b4/andrea-de-santis-zwd435-ewb4-unsplash.jpg 165w,\n/static/9e2389dadc3934d1e0ba6f52d023d46e/47f88/andrea-de-santis-zwd435-ewb4-unsplash.jpg 330w,\n/static/9e2389dadc3934d1e0ba6f52d023d46e/91671/andrea-de-santis-zwd435-ewb4-unsplash.jpg 660w,\n/static/9e2389dadc3934d1e0ba6f52d023d46e/5aaff/andrea-de-santis-zwd435-ewb4-unsplash.jpg 1320w","sizes":"(min-width: 660px) 660px, 100vw"},"sources":[{"srcSet":"/static/9e2389dadc3934d1e0ba6f52d023d46e/322ad/andrea-de-santis-zwd435-ewb4-unsplash.webp 165w,\n/static/9e2389dadc3934d1e0ba6f52d023d46e/de3b3/andrea-de-santis-zwd435-ewb4-unsplash.webp 330w,\n/static/9e2389dadc3934d1e0ba6f52d023d46e/2b2b5/andrea-de-santis-zwd435-ewb4-unsplash.webp 660w,\n/static/9e2389dadc3934d1e0ba6f52d023d46e/e36a7/andrea-de-santis-zwd435-ewb4-unsplash.webp 1320w","type":"image/webp","sizes":"(min-width: 660px) 660px, 100vw"}]},"width":660,"height":400}}}},"body":"<h2>Introduction</h2>\n<p>With more and more businesses utilising Cloud platforms such as Azure, AWS or GCP and deploying their infrastructure to the cloud, it has become important to find ways to automate the deployment process of this. The benefits of automating deployment of IaC and IaC itself are:</p>\n<ul>\n<li><strong>Diaster recovery</strong> - Having your infrastructure all coded out and automated allows you to redeploy your infrastructure in a few minutes. It also allows you to rollback changes to a working state if any new changes break your infrastructure.</li>\n<li><strong>Auditing</strong> - Utilising IaC you can use branching policies and pull requests in your code repo to review any changes that are going to be made to the infrastructure (more on this later). Meaning you have an audit trail of the changes that have been made.</li>\n<li><strong>Security</strong> - You can increase security by reducing permissions that people have in the Cloud Portal so that no deployments can be done via the portal and only via IaC.</li>\n<li><strong>Productivity/Efficiency</strong> - By having your infrastructure as code you can deploy multiple environments e.g. for development, QA, production. This would take minutes, rather than hours when trying to deploy it via the portal. Saving time for engineers to spend time doing other tasks.</li>\n<li><strong>Documentation</strong> - The IaC is your documentation for your infrastructure so if an engineer leaves, the infrastructure that is required is already documented and procedures to deploy and change it should be in place.</li>\n</ul>\n<p>This blog will inform you how to deploy your Terraform scripts using Azure DevOps pipelines. Bearing in mind I have wrote this thinking you know about Terraform and have some understanding of Azure DevOps</p>\n<h2>How to Automate deploying Infrastructure</h2>\n<p>By using the tool Terraform and CI/CD pipelines provided by Azure DevOps, we can build, change and version infrastructure both safely and efficiently. The first job is the map out your infrastructure and convert it into code by using Terraform. Terraform provides very good documentation on how to map out your resources into Terraform scripts, which can be found here. If you use certain cloud platforms here are some Terraform documentation below:</p>\n<ul>\n<li><a href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs\">Azure</a></li>\n<li><a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs\">AWS</a></li>\n<li><a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs\">Google Cloud Platform</a></li>\n</ul>\n<p>Once you have your infrastructure beautifully coded into Terraform you can start configuring your pipelines. In Azure DevOps you should set up your pipelines</p>\n<h2>Build Pipeline</h2>\n<p>The reason why we have a build pipeline is are for a number of reasons:</p>\n<ol>\n<li>To check your code is valid before you can commit it to the master branch e.g. very useful once branch policies are set up for Pull requests</li>\n<li>So that you can check the what changes will be made to the infrastructure if you deploy the Terraform scripts. As you can see from the example below one of the build steps is a \"Terraform Plan\" step which will show us the changes that will be made to the infrastructre, here it will create an Azure Kubernetes cluster. Terraform Plan is nicely formatted at the build pipeline with symbols with \"+ = create\", \"- = destroy\" and \"~ = changes\".</li>\n</ol>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 588px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.84848484848484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB70lEQVR42n2S/W6bMBTF+xyNbQwEsK8/sQ02EGhC2mSqqr3/40xk0zRpDdKV7H9+PsfnnpemrjhreFNz1gDfRgIIYKyugDPB2bHIM4JpRv6fl9iHeRqnFDvv+uBPY4pd6DvfeX8ahtMYndUEo+/hqiqt0XVVFjktivxY5EVO85yWvy80y2n2LbnBErhWQgEYJbUSEsBqpZW0WuU0e2b4D8x5s8xT8O2Q4jaxG1PczAffBx9864yxWksprNEC+L/PvdA8c86OQ0yxN0Zbo7SUrrW996kLv/WfKmN00FZ9/bgPsTdaeWetVs61t3V9m0/n86IFYIzyb2GCMQAD3qDDa04zghFGByVFDCF4l1KvBMfP0sYIWWc+77f7+/V9vXTeZwS7tr2/b8rX9ayAPV0VwUhIPg1pHJIAVh1LmhEAHrsQXBu70FTHpyUhm7L++fV5u17Py8zqCh1evWtv13UahmU+Sd7sKGMObEyxfmgWOSUYAfB5HE7T2NR1Qele2rbVH+sl9X0X3BYPOlhjPi7ny7Kslzcl+J4yCHZ5m8/LnPpOAWzLU3KZxtQFoxSrd/78sO1bU+aUNXV1LDOCgfMYgm+tMWovsIzguqlarZUU1bFEh1eCEcEoIzgjeKdej3o+DgBmH90UnEsBEtgO8xf+BX+VnQOyZOz2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7a293f0fb1569183ff054586317cd11b/c9b55/Terraform-Plan-Example.webp 165w,\n/static/7a293f0fb1569183ff054586317cd11b/f2908/Terraform-Plan-Example.webp 330w,\n/static/7a293f0fb1569183ff054586317cd11b/c12c1/Terraform-Plan-Example.webp 588w\"\n              sizes=\"(max-width: 588px) 100vw, 588px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7a293f0fb1569183ff054586317cd11b/04c57/Terraform-Plan-Example.png 165w,\n/static/7a293f0fb1569183ff054586317cd11b/d9ecf/Terraform-Plan-Example.png 330w,\n/static/7a293f0fb1569183ff054586317cd11b/9bbaf/Terraform-Plan-Example.png 588w\"\n            sizes=\"(max-width: 588px) 100vw, 588px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7a293f0fb1569183ff054586317cd11b/9bbaf/Terraform-Plan-Example.png\"\n            alt=\"Terraform Plan\"\n            title=\"Example of Terraform Plan\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Example of Terraform Plan</p></figcaption>\n  </figure>\r\nThe following steps should be added to your Build Pipelines\r\nNote:</p>\n<ul>\n<li>This uses the Azure DevOps Terraform Plugin which can be found <a href=\"https://marketplace.visualstudio.com/items?itemName=charleszipp.azure-pipelines-tasks-terraform\">here</a></li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 573px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.45454545454545%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdElEQVR42pXOzU7bQBiFYd8EAikQz489Y3vms+M4k7FDqLEJhbTlJwGFSCBQACURiUBFIFh03yto1UVZoKhbrhFRdR1T6dm+OsfQ7dO0O9afB1ZygOodEndp3CVFWHoSrO0Yq52rxuFXtTulH84aexPRumDZgOfn82QDb2scZD0jOfqxPnzee5h1Hv+Mvr/s3s82pk/J5a859PnP6vB3evzNqLRGaucm7d3m/Tu9fx20x5X22N8ezQFbQ//TJMx7BrfqLvNjFdbCwLHJ8tKCubxUrLSIyiXDpoHDIUl0tVIBACkEMsvINAsRjA1uac+rNpuJiiIACABQeeVvX4BgZHAr4EyA9KTwPNcxV95V/osJrjEWpGkz1jFIQTD6j3jU+dJvf4xUra5UFIZRNdRa+SDNovNv8fZqktYVgHQdThCiFNsWtQh+1zLCyBXeZivfyLM8y2KtG0msahEleP74W+w5XLgOSOFLCVIy27ItymzKmV3oFS9HlyeCYURtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e8f6844011c0151d9b878cc627f051af/c9b55/BuildPipeline.webp 165w,\n/static/e8f6844011c0151d9b878cc627f051af/f2908/BuildPipeline.webp 330w,\n/static/e8f6844011c0151d9b878cc627f051af/351b3/BuildPipeline.webp 573w\"\n              sizes=\"(max-width: 573px) 100vw, 573px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e8f6844011c0151d9b878cc627f051af/04c57/BuildPipeline.png 165w,\n/static/e8f6844011c0151d9b878cc627f051af/d9ecf/BuildPipeline.png 330w,\n/static/e8f6844011c0151d9b878cc627f051af/3c024/BuildPipeline.png 573w\"\n            sizes=\"(max-width: 573px) 100vw, 573px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e8f6844011c0151d9b878cc627f051af/3c024/BuildPipeline.png\"\n            alt=\"Build Pipeline Tasks\"\n            title=\"Example of Build Pipeline tasks\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Example of Build Pipeline tasks</p></figcaption>\n  </figure></p>\n<ul>\n<li><strong>Terraform Install</strong> - This step installs Terraform and the version which you dictate onto the build agent</li>\n<li><strong>Terraform Init</strong> - This step initialises Terraform on the build agent and also creates a .tfstate file that will house the state of the infrastructure e.g. what is deployed. You can choose where to create this .tfstate file, I recommend storing it in a storage account within the Azure Subscription you are deploying too.</li>\n<li><strong>Terraform Validate</strong> - This step validates that the syntax of your code is correct</li>\n<li><strong>Terraform Plan</strong> - This steps will compare the code in your Terraform files to the infrastructure that is deployed (dictated in the .tfstate file more info here) and output the changes it will do. It is also here you add in the variables you are injecting into the Terraform scripts, make sure to utilise the Azure DevOps Library Sets.</li>\n<li><strong>Delete files from Terraform</strong> - This is just used to delete any Terraform modules in your ./Terraform folder. This step is Optional</li>\n<li><strong>Publish Artifact</strong> - This basically will create an artifact that contains your Terraform files in your repository, which will be then used in the release pipeline</li>\n</ul>\n<h2>Release Pipeline</h2>\n<p>The release pipeline has two stages <strong>Terraform Plan Stage</strong> and <strong>Terraform Apply Stage</strong> both have the same steps, but the <strong>Terraform Apply Stage</strong> has the additional step which will tell Terraform to apply the plan to the infrastructure. The reason why it is set up like this are:</p>\n<ul>\n<li>To check that your code is valid. Although we did this at the build step it's always good to double check</li>\n<li>You can add a pre-approval gate before Terraform deploys the infrastructure changes. This is a good gate to have to ensure that the appropriate people can approve deployment changes, this adds security and responsibility as well as auditing</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.54545454545455%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+0lEQVR42o2POU7EQBBFfQ+7u7Ze7HZ5GYOHkUeaYDQkJIgIaVIiMgJuwDm4BQdEXiCF0ou+9PR/Zd654D2LMBETBu+E5yOEP8k0VW2K4jyLE6Zhtwux9LEksASGwCDYFdowuISzHFObxnM9TFpFJ2KKHAAKIANkyQHLalokA2xwCZHQmlk+Pb5cP75Or5/j/TNDIUxt3+vNodsfpVJfaQhemLphbG6nbj/5uiuTMgICZN3hcrm+3z29tccHtDkipCpqo03bB8dxFpEQmjo1baeqQSh6t812jFqXWkc0ORMiWLBmofj99icswBqcO+0mC3OdqjIGQlhL/s83MVE+Ihibyj8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ffdd03550e64c30d0e68c519e23d86ab/c9b55/ReleasePipeline.webp 165w,\n/static/ffdd03550e64c30d0e68c519e23d86ab/f2908/ReleasePipeline.webp 330w,\n/static/ffdd03550e64c30d0e68c519e23d86ab/cc661/ReleasePipeline.webp 660w,\n/static/ffdd03550e64c30d0e68c519e23d86ab/e299d/ReleasePipeline.webp 866w\"\n              sizes=\"(max-width: 660px) 100vw, 660px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ffdd03550e64c30d0e68c519e23d86ab/04c57/ReleasePipeline.png 165w,\n/static/ffdd03550e64c30d0e68c519e23d86ab/d9ecf/ReleasePipeline.png 330w,\n/static/ffdd03550e64c30d0e68c519e23d86ab/1f083/ReleasePipeline.png 660w,\n/static/ffdd03550e64c30d0e68c519e23d86ab/c1328/ReleasePipeline.png 866w\"\n            sizes=\"(max-width: 660px) 100vw, 660px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ffdd03550e64c30d0e68c519e23d86ab/1f083/ReleasePipeline.png\"\n            alt=\"Release Pipeline\"\n            title=\"Example of Release Pipeline\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Example of Release Pipeline</p></figcaption>\n  </figure></p>\n<h3>Terraform Plan Stage</h3>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 565px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.42424242424243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOElEQVR42pXOS0vDQBSG4fkhzVwztzSTZCaTSS9pqVqkm+JGqy5EqKC4E9daoYtW/dVSrdsa4eGFs/jggMIYbwulZF0FSlAobSgLLXnTr7tK2Nx4myse195RDFHUwXCPoAiMbtand9vpcju+3biLV/+t3HX1099z173zl+pqXcyfwOzhc/74Mbt/ny43frGqLt/+tljV12t39gxckZVFnihOUMQI3MGQ4ugwRikjCDTN4OR4UtcBYwhhhBBECBKCD2OxJAQDyS3naZ6lzlpn8ywzJtWUoMMIhpQgIOIy0bbfD81w2KuDklJJgRFsA0gelLS92le+NGmCog6MOm3HnGWCp87lmTE8ZgTvXmo71mLQ1eFoMh41TeU9oxjB9mPZ1SrJszRNEhEzweP2gFZCK6EEV1JoJf/lC0C2gNsKt9ZVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/fb4ab51541b2af64806501983855eb62/c9b55/ReleasePipelinePlan.webp 165w,\n/static/fb4ab51541b2af64806501983855eb62/f2908/ReleasePipelinePlan.webp 330w,\n/static/fb4ab51541b2af64806501983855eb62/acb73/ReleasePipelinePlan.webp 565w\"\n              sizes=\"(max-width: 565px) 100vw, 565px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/fb4ab51541b2af64806501983855eb62/04c57/ReleasePipelinePlan.png 165w,\n/static/fb4ab51541b2af64806501983855eb62/d9ecf/ReleasePipelinePlan.png 330w,\n/static/fb4ab51541b2af64806501983855eb62/07eba/ReleasePipelinePlan.png 565w\"\n            sizes=\"(max-width: 565px) 100vw, 565px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/fb4ab51541b2af64806501983855eb62/07eba/ReleasePipelinePlan.png\"\n            alt=\"Release Pipeline Plan Tasks\"\n            title=\"Example of Release Pipeline Plan Tasks\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Example of Release Pipeline Plan Tasks</p></figcaption>\n  </figure></p>\n<h3>Terraform Apply Stage</h3>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.878787878787875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAuUlEQVR42pWPWRKCMBBEcw6V7MlkRkAgkALLAC73P5OlJwhV77f7dbN93/PjDt45Y6TgRUihLUjBWZr6GHvv7eV80koWYozRSjJvHynFnPPn/ZriMMYBvOPVpWQCsxqJQn2lW9vYX51QUhTuZwTbMqd928Y4OGdEVZU+F5xpBfWV2qYJ4P9ifiBM8Fzmac1rSgkRjpmNwrap++5WEyKGg+bw+pnXdYxx6DvBj5gDWKJAiOCddxYDlPMFY4lTrfxg2XwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/21ca9fff7388087fda6be8398dbea7fc/c9b55/ReleasePipelineApply.webp 165w,\n/static/21ca9fff7388087fda6be8398dbea7fc/f2908/ReleasePipelineApply.webp 330w,\n/static/21ca9fff7388087fda6be8398dbea7fc/048c8/ReleasePipelineApply.webp 570w\"\n              sizes=\"(max-width: 570px) 100vw, 570px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/21ca9fff7388087fda6be8398dbea7fc/04c57/ReleasePipelineApply.png 165w,\n/static/21ca9fff7388087fda6be8398dbea7fc/d9ecf/ReleasePipelineApply.png 330w,\n/static/21ca9fff7388087fda6be8398dbea7fc/432e7/ReleasePipelineApply.png 570w\"\n            sizes=\"(max-width: 570px) 100vw, 570px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/21ca9fff7388087fda6be8398dbea7fc/432e7/ReleasePipelineApply.png\"\n            alt=\"Release Pipeline Apply Tasks\"\n            title=\"Example of Release Pipeline Apply Tasks\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Example of Release Pipeline Apply Tasks</p></figcaption>\n  </figure></p>\n<p>As you can see these are similar steps to those used in the Build Pipeline with the new step called <strong>Terraform Apply</strong> which will deploy the changes that it dectects from the .tfstate file and your Terraform files.</p>","categories":["Infrastructure as Code","Terraform","Azure DevOps"],"date":"July 12, 2020","description":"Automate Terraform Infrastructure Deployments with Azure DevOps","id":"6a30b721-e122-5a3f-9b51-473339f9d11d","keywords":["Infrastructure as Code","Azure DevOps","Terraform","Blog"],"slug":"/AutomateTerraformInfrastructureDeployments/","title":"Automate Terraform Infrastructure Deployments","readingTime":{"text":"5 min read"}},{"banner":{"alt":"IaC","caption":"Photo by <u><a href=\"https://unsplash.com/photos/j7q-Z9DV3zw\">Nathan Waters</a></u>","src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#787878","images":{"fallback":{"src":"/static/8dc0d4e035c654e87d0fcf2e7f0047a0/91671/nathan-waters-j7q-Z9DV3zw-unsplash.jpg","srcSet":"/static/8dc0d4e035c654e87d0fcf2e7f0047a0/7e3b4/nathan-waters-j7q-Z9DV3zw-unsplash.jpg 165w,\n/static/8dc0d4e035c654e87d0fcf2e7f0047a0/47f88/nathan-waters-j7q-Z9DV3zw-unsplash.jpg 330w,\n/static/8dc0d4e035c654e87d0fcf2e7f0047a0/91671/nathan-waters-j7q-Z9DV3zw-unsplash.jpg 660w,\n/static/8dc0d4e035c654e87d0fcf2e7f0047a0/5aaff/nathan-waters-j7q-Z9DV3zw-unsplash.jpg 1320w","sizes":"(min-width: 660px) 660px, 100vw"},"sources":[{"srcSet":"/static/8dc0d4e035c654e87d0fcf2e7f0047a0/322ad/nathan-waters-j7q-Z9DV3zw-unsplash.webp 165w,\n/static/8dc0d4e035c654e87d0fcf2e7f0047a0/de3b3/nathan-waters-j7q-Z9DV3zw-unsplash.webp 330w,\n/static/8dc0d4e035c654e87d0fcf2e7f0047a0/2b2b5/nathan-waters-j7q-Z9DV3zw-unsplash.webp 660w,\n/static/8dc0d4e035c654e87d0fcf2e7f0047a0/e36a7/nathan-waters-j7q-Z9DV3zw-unsplash.webp 1320w","type":"image/webp","sizes":"(min-width: 660px) 660px, 100vw"}]},"width":660,"height":400}}}},"body":"<p>The following is a quick blog of my opinion on Terraform and Azure ARM. I am by far an expert on these tools, having only used Terraform on and off for 2 months and Azure ARM for less than a month. Both have its benefits which I will go on to explain and will reveal my preferred choice and why at the end. I have to also mention that I use Azure as my cloud provider so this will be written from that perspective. So lets begin and compare some points I feel are important for a good tool to use for Infrastructure as code (IaC)</p>\n<h2>Understanding</h2>\n<p>The way that Terraform is written allows for a wider audience to use of all skill levels. The simplicity of the documentation and examples given from it, allow for the user to easily apply Terraform to their own needs. For example the below code allows me to create a Windows Virtual Machine (VM), allocate it's network card, login information, the spec of the virtual machine, data disks and operating disks. It can also do more such as running certain scripts after the VM has been built</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">            resource <span class=\"token string\">\"azurerm_virtual_machine\"</span> <span class=\"token string\">\"main\"</span> <span class=\"token punctuation\">{</span>\r\n              name                  = <span class=\"token string\">\"${var.prefix}-vm\"</span>\r\n              location              = <span class=\"token string\">\"${azurerm_resource_group.main.location}\"</span>\r\n              resource_group_name   = <span class=\"token string\">\"${azurerm_resource_group.main.name}\"</span>\r\n              network_interface_ids = <span class=\"token punctuation\">[</span><span class=\"token string\">\"${azurerm_network_interface.main.id}\"</span><span class=\"token punctuation\">]</span>\r\n              vm_size               = <span class=\"token string\">\"Standard_DS1_v2\"</span>\r\n            \r\n              storage_image_reference <span class=\"token punctuation\">{</span>\r\n                publisher = <span class=\"token string\">\"MicrosoftWindowsServer\"</span>\r\n                offer     = <span class=\"token string\">\"WindowsServer\"</span>\r\n                sku       = <span class=\"token string\">\"2016-Datacenter\"</span>\r\n                version   = <span class=\"token string\">\"latest\"</span>\r\n              <span class=\"token punctuation\">}</span>\r\n              storage_os_disk <span class=\"token punctuation\">{</span>\r\n                name              = <span class=\"token string\">\"myosdisk1\"</span>\r\n                caching           = <span class=\"token string\">\"ReadWrite\"</span>\r\n                create_option     = <span class=\"token string\">\"FromImage\"</span>\r\n                managed_disk_type = <span class=\"token string\">\"Standard_LRS\"</span>\r\n              <span class=\"token punctuation\">}</span>\r\n              os_profile <span class=\"token punctuation\">{</span>\r\n                computer_name  = <span class=\"token string\">\"hostname\"</span>\r\n                admin_username = <span class=\"token string\">\"testadmin\"</span>\r\n                admin_password = <span class=\"token string\">\"Password1234!\"</span>\r\n              <span class=\"token punctuation\">}</span>\r\n              os_profile_linux_config <span class=\"token punctuation\">{</span>\r\n                disable_password_authentication = <span class=\"token boolean\">false</span>\r\n              <span class=\"token punctuation\">}</span>\r\n              tags = <span class=\"token punctuation\">{</span>\r\n                environment = <span class=\"token string\">\"staging\"</span>\r\n              <span class=\"token punctuation\">}</span>\r\n            <span class=\"token punctuation\">}</span>\r\n          </code></pre></div>\n<p>As previously mentioned the documentation as for any technology is key to how well the user will understand how to use it. And for Terraform it is excellent (VM documentation here). Terraform uses it's own HCL language the interpolation syntax it utilises is very powerful, and lets you reference variables and attributes with ease. In addition, because it utilises this HCL language it also makes it more readable and user friendly in my opinion than Azure ARM. Azure ARM is written in JSON which, yes it could be argued is also readable but when you see it and try to utilise it for the first time it can be quite interesting to say the least. An example defining a virtual machine resource is below.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">    <span class=\"token punctuation\">{</span>\r\n                  <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Microsoft.Compute/virtualMachines\"</span><span class=\"token punctuation\">,</span>\r\n                  <span class=\"token property\">\"apiVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2018-10-01\"</span><span class=\"token punctuation\">,</span>\r\n                  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[variables('vmName')]\"</span><span class=\"token punctuation\">,</span>\r\n                  <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[parameters('location')]\"</span><span class=\"token punctuation\">,</span>\r\n                  <span class=\"token property\">\"dependsOn\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n                    <span class=\"token string\">\"[resourceId('Microsoft.Storage/storageAccounts/', variables('storageAccountName'))]\"</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token string\">\"[resourceId('Microsoft.Network/networkInterfaces/', variables('nicName'))]\"</span>\r\n                  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n                  <span class=\"token property\">\"properties\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                    <span class=\"token property\">\"hardwareProfile\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                      <span class=\"token property\">\"vmSize\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[parameters('vmSize')]\"</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token property\">\"osProfile\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                      <span class=\"token property\">\"computerName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[variables('vmName')]\"</span><span class=\"token punctuation\">,</span>\r\n                      <span class=\"token property\">\"adminUsername\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[parameters('adminUsername')]\"</span><span class=\"token punctuation\">,</span>\r\n                      <span class=\"token property\">\"adminPassword\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[parameters('adminPassword')]\"</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token property\">\"storageProfile\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                      <span class=\"token property\">\"imageReference\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token property\">\"publisher\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MicrosoftWindowsServer\"</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token property\">\"offer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"WindowsServer\"</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token property\">\"sku\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[parameters('windowsOSVersion')]\"</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"latest\"</span>\r\n                      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                      <span class=\"token property\">\"osDisk\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token property\">\"createOption\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"FromImage\"</span>\r\n                      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                      <span class=\"token property\">\"dataDisks\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n                        <span class=\"token punctuation\">{</span>\r\n                          <span class=\"token property\">\"diskSizeGB\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1023</span><span class=\"token punctuation\">,</span>\r\n                          <span class=\"token property\">\"lun\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n                          <span class=\"token property\">\"createOption\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Empty\"</span>\r\n                        <span class=\"token punctuation\">}</span>\r\n                      <span class=\"token punctuation\">]</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token property\">\"networkProfile\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                      <span class=\"token property\">\"networkInterfaces\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n                        <span class=\"token punctuation\">{</span>\r\n                          <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[resourceId('Microsoft.Network/networkInterfaces',variables('nicName'))]\"</span>\r\n                        <span class=\"token punctuation\">}</span>\r\n                      <span class=\"token punctuation\">]</span>\r\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n                    <span class=\"token property\">\"diagnosticsProfile\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                      <span class=\"token property\">\"bootDiagnostics\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n                        <span class=\"token property\">\"enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n                        <span class=\"token property\">\"storageUri\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[reference(resourceId('Microsoft.Storage/storageAccounts/', variables('storageAccountName'))).primaryEndpoints.blob]\"</span>\r\n                      <span class=\"token punctuation\">}</span>\r\n                    <span class=\"token punctuation\">}</span>\r\n                  <span class=\"token punctuation\">}</span>\r\n                <span class=\"token punctuation\">}</span>\r\n              <span class=\"token punctuation\">]</span></code></pre></div>\n<p>Looking at both the Terraform and Azure ARM way of defining a VM, I know which one I prefer myself. <em>Cough</em> Terraform <em>Cough</em></p>\n<h2>Cross-platform</h2>\n<p>As Terraform is not platform specific unlike Azure ARM, it is versatile allowing you to write your infrastructure as code (IaC) for different cloud providers such as Google Cloud Platform (GCP), Amazon Web Services (AWS) or VMware just to name a few. This is useful for businesses that utilise more than one Cloud platform to provide their services, which according to a report is the case <a href=\"https://www.uktech.news/news/uk-businesses-turn-multiple-cloud-providers-20190103\">\"UK businesses turn to multiple cloud providers\"</a> Don't really think I need to write something for Azure ARM for this.</p>\n<h2>Community and support</h2>\n<p>I found that Terraform responds to issues that are reported quite quickly and the support by the community is also a speedy response. <a href=\"https://github.com/terraform-providers\">Click here for issue forum</a>. I personally haven't used the support for Azure ARM, but this is due to the nice error responses that get thrown up when you do try deploy it. Not to say that Terraform doesn't do the same.</p>\n<h2>Easy of deployment/Workflow</h2>\n<p>Talking in terms of using Azure DevOps to deploy. Both I found are quite simple to deploy, although I found that Azure ARM templates are easier to deploy, due to it being deployed on its native platform. Terraform I had to find out how to write the .yaml instruction document to deploy. Azure ARM templates however, do require you to create the resources groups that you are deploying too and for each resource group you'll need a ARM template for. Unlike in Terraform where it would deploy the resource groups itself as defined in the .tf files, you could technically deploy all the resource groups you need and define it in a single .tf file. For tools I always use Visual Studio code, both Terraform and Azure ARM both have extensions installed on it allowing for syntax highlighting and suggestions. Both do a great job.</p>\n<ul>\n<li><a href=\"https://github.com/Azure/vscode-azureterraform\">Terraform Visual Studio Code extension</a></li>\n<li><a href=\"https://github.com/Microsoft/vscode-azurearmtools\">Azure ARM Visual Studio Code extension</a></li>\n</ul>\n<h2>Validation</h2>\n<p>Where both do validate the code for you before you apply the code itself. Although Azure ARM does not validate the deployment and you will have to deploy it to see whether everything is working as planned. Terraform on the other hand, does validate it through it's plan phase, where it checks the status of whats currently deployed in the Terraform state file (Stored as a blob on Azure if deploying to Azure)</p>\n<h2>Maintainability</h2>\n<p>Having used Terraform more and having to maintain its files more I can say that Terraform will seem to me to be easier. As I haven't had to do \"big\" maintenance on Azure ARM yet. But looking at it compared to Terraform I am not looking forward to it at all! This is due to the fact that Terraform is more readable than ARM and has better syntax for defining and calling variables/attributes.</p>\n<h2>Resource Support</h2>\n<p>What I mean by this is whether the tools support the resources that you need to deploy, such as VMs, databases etc. As Terraform is quite a new tool compared to Azure ARM and given that Azure ARM is written by the Cloud provider I use it is bound to be quite up to date with the that can be deployed via IaC. I found that Terraform lacks quite a few new resources, which is not a surprise seeing as it's just nearly on version 2.0. I also found from personal experience that even if it has the resources on there, some attributes that you want to define for that resource is not allowed or given. They have given an alternative such as deploying ARM templates via Terraform (<a href=\"https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/template_deployment.html\">Can be seen here</a>, but it seems very long winded to do it like this when you can just do it via Azure ARM templates.</p>\n<h2>Conclusion</h2>\n<p>Overall, though I do love Terraform due to it's readability, ease of use and many of the other biased points that I've stated above. I think going on from here until Terraform is updated I will be using Azure ARM templates, due to the up to date resources and the ease of setting up deployment. I can also see it being used more for CI/CD pipelines going forward and I do love a challenge.... Disclaimer: This was written at 4am so please excuse any errors that are in this! Yours faithfully, An Aspiring DevOps Guy</p>","categories":["Infrastructure as Code","Terraform"],"date":"June 12, 2020","description":"Terraform Vs ARM","id":"22211907-07a3-5bf0-9893-cfdbc83714c5","keywords":["Infrastructure as Code","Azure","ARM","Terraform","Blog"],"slug":"/TerraformVsARM/","title":"Terraform Vs ARM","readingTime":{"text":"7 min read"}}]}},"staticQueryHashes":["172304273","1764120992","2442753764","2572006233","3525841079","513457919","540466502","597217301","948380417"],"slicesMap":{}}